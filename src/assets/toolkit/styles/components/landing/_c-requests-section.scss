/*==============================================================================
Index
----------------------------------------
01 - Requests Wrapper Theme
02 - Requests Wrapper Base
03 - Wrapper Header
04 - Wrapper Content
05 - Filter Column
06 - Main Column
07 - Search & Table
==============================================================================*/

/* --------------------
01 - Requests Wrapper Theme
-------------------- */
@mixin requests-wrapper-theme-light {
    --color-section-bg: #fff;
    --color-section-title: #333;
    --color-section-border: #eee;
    --color-filter-btn-bg: #B3B2B5;
    --color-filter-btn-text: #423D47;
}

@mixin requests-wrapper-theme-dark {
    --color-section-bg: #1a1a1a;
    --color-section-title: #eaeaea;
    --color-section-border: #333;
    --color-filter-btn-bg: #4a4a4a;
    --color-filter-btn-text: #fff;
}

.c-requests-wrapper {
    @include requests-wrapper-theme-light();
}

html[data-theme="dark"] {
    .c-requests-wrapper {
        @include requests-wrapper-theme-dark();
    }
}

/* --------------------
02 - Requests Wrapper Base
-------------------- */
.c-requests-wrapper {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    width: 100%;
    min-width: 0; /* Allow flex item to shrink */
}

/* --------------------
03 - Wrapper Header
-------------------- */
.c-requests-wrapper__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 1rem;
    width: 100%;
    min-width: 0; /* Allow flex item to shrink */
}

.c-requests-wrapper__title {
    color: #333;
    font-family: Graphik, sans-serif;
    font-size: 1.25rem; /* 20px */
    font-style: normal;
    font-weight: 500;
    line-height: 1.875rem; /* 30px / 150% */
    margin: 0;
}

.c-requests-wrapper__actions {
    flex-shrink: 0; /* Prevent button from shrinking */
    
    .o-primary-button.-create-request {
        display: inline-flex;
        height: 2.5rem; /* 40px */
        min-width: 6.75rem; /* 108px */
        padding: var(--Spacer-spacing-04, 0.75rem) var(--Spacer-spacing-05, 1rem); /* 12px 16px */
        justify-content: center;
        align-items: center;
        gap: 0.5rem; /* 8px */
        border-radius: 6.25rem; /* 100px */
        background: linear-gradient(90deg, #7100EC 0%, #8901C5 100%), var(--Button-button-bg-primary, #000);
        border: none;
        white-space: nowrap; /* Prevent text wrapping */
        
        /* Text styling */
        color: var(--Button-button-text-primary, #FFF);
        font-family: Graphik, sans-serif;
        font-size: 0.875rem; /* 14px */
        font-style: normal;
        font-weight: 400;
        line-height: 0.875rem; /* 14px / 100% */

        &:hover,
        &:focus {
            background: linear-gradient(0deg, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.2) 100%), 
                        linear-gradient(90deg, #7100EC 0%, #8901C5 100%);
        }
    }
}

/* --------------------
04 - Wrapper Content
-------------------- */
.c-requests-wrapper__content {
    display: flex;
    align-items: flex-start;
    gap: 0; /* No gap by default */
    width: 100%;
    min-width: 0; /* Allow flex item to shrink */
    
    /* Add gap only when filter panel is open */
    &:has(.c-requests-wrapper__filter-panel.-show) {
        gap: 1rem;
    }
}

/* --------------------
05 - Filter Column (Sidebar layout)
-------------------- */
.c-requests-wrapper__filter-col {
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
    align-self: flex-start;
    /* Filter button is now position: fixed, so no relative positioning needed */
}

.c-requests-wrapper__filter-btn {
    display: flex;
    width: 2rem; /* 32px */
    padding: 0.3125rem 0.25rem 0.1875rem 0.25rem; /* 5px 4px 3px 4px */
    justify-content: center;
    align-items: center;
    aspect-ratio: 1/1;
    border-radius: 0.25rem; /* 4px */
    background: #F7F7F8;
    box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.08);
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
    position: fixed;
    left: 0;
    z-index: 100;
    /* Position will be set dynamically via JS to align with toolbar */

    i {
        width: 1.5rem; /* 24px */
        height: 1.5rem; /* 24px */
        flex-shrink: 0;
        color: #8301CF;
        font-size: 1.5rem; /* 24px */
        display: flex;
        align-items: center;
        justify-content: center;
    }

    &:hover {
        background: #e8e8e8;
    }

    /* Hide button when filter panel is open */
    &[aria-expanded="true"] {
        display: none;
    }
}

.c-requests-wrapper__filter-panel {
    display: none;

    &.-show {
        display: block;
    }

    .c-filter-panel {
        position: relative;
        opacity: 1;
        visibility: visible;
        transform: none;
    }
}

/* --------------------
06 - Main Column
-------------------- */
.c-requests-wrapper__main {
    flex: 1;
    width: 100%;
    min-width: 0; /* Allow flex item to shrink */
    display: flex;
    flex-direction: column;
    gap: 1rem;
    overflow: hidden; /* Prevent content overflow */
}

.c-requests-wrapper__toolbar {
    width: 100%;
    min-width: 0; /* Allow flex item to shrink */
    
    .c-action-toolbar {
        padding: 0;
    }
}

/* When filter panel is open, center the toolbar and allow wrapping */
.c-requests-wrapper__content:has(.c-requests-wrapper__filter-panel.-show) {
    .c-requests-wrapper__toolbar {
        .c-action-toolbar {
            justify-content: center;
            flex-wrap: wrap;
        }
    }
}

/* --------------------
07 - Search & Table
-------------------- */
.c-requests-wrapper__search-table {
    background: #FFF;
    border-radius: 1.5rem 0 0 0; /* 24px rounded top-left corner only */
    border-top: 1px solid #DCDCDC;
    border-right: 1px solid #DCDCDC;
    border-left: 1px solid #DCDCDC;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    width: 100%;
    min-width: 0; /* Allow flex item to shrink */
}

.c-requests-wrapper__search {
    padding: 0.75rem 1rem;
    margin-bottom: 0;
    flex-shrink: 0;
    background: var(--color-section-bg);
    display: flex;
    justify-content: center; /* Center the search field */
    align-items: center;

    .o-searchfield__wrap {
        display: flex;
        width: 100%;
        max-width: 96%; /* 1107px */
        min-height: 1rem; /* 16px */
        padding: 0.5005rem 0.03125rem 0.5005rem 0.1877rem; /* 8.008px 0.5px 8.008px 3.003px */
        flex-direction: row; /* Icon and input side by side */
        justify-content: flex-start;
        align-items: center;
        gap: 0.25rem; /* 4px */
        flex-shrink: 0;
        background: transparent;
        border-bottom: 1px solid #A5A5A5; /* Centered border */
        
        /* Responsive adjustments */
        @media (max-width: 1200px) {
            max-width: 100%;
            padding: 0.5rem 0.5rem 0.5rem 0.25rem;
        }
    }

    .o-searchfield__icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 0.8358rem; /* 13.372px */
        height: 0.7969rem; /* 12.75px */
        aspect-ratio: 13.37 / 12.75;
        color: #5922F6;
        font-size: 0.8rem;
        flex-shrink: 0;
    }

    .o-searchfield__input {
        flex: 1;
        border: none;
        background: transparent;
        outline: none;
        color: #7C7C7C;
        font-family: Graphik, sans-serif;
        font-size: 0.875rem; /* 14px */
        font-style: normal;
        font-weight: 400;
        line-height: 1rem; /* Match icon height for vertical centering */
        height: 1rem;
        padding: 0;
        margin: 0;

        &::placeholder {
            color: #7C7C7C;
            font-family: Graphik, sans-serif;
            font-size: 0.875rem; /* 14px */
            font-style: normal;
            font-weight: 400;
            line-height: 1rem;
        }
    }
}

.c-requests-wrapper__table {
    flex: 1;
    width: 100%;
    overflow-x: auto; /* Horizontal scrollable table area */
    overflow-y: auto; /* Vertical scrollable if needed */
    background: var(--color-section-bg);
}

/* --------------------
Legacy Support (remove if not needed)
-------------------- */
.c-requests-section {
    @include requests-wrapper-theme-light();
    flex: 1;
    background: transparent;
}

html[data-theme="dark"] {
    .c-requests-section {
        @include requests-wrapper-theme-dark();
    }
}
